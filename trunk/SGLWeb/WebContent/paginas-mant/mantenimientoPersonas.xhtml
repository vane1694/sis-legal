<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	
<ui:composition template="../WEB-INF/plantilla/layoutmnt.xhtml">

	<ui:define name="contenido">

		<h:form id="frmMantenPers">
			<h2>Mantenimiento Persona</h2>

				<h:panelGrid columns="1" id="gridMsj">
					<p:messages id="msjPers" globalOnly="true" />
				</h:panelGrid>

				<h:panelGrid columns="3" id="gridPers">

					<h:outputLabel value="Clase :" />
					<p:selectOneMenu id="somClase" value="#{actSeguiExpe.idClase}"
						effect="fade" label="Clase" style="width:120px;">
						<f:selectItem itemLabel="Seleccione" itemValue="-1" />
						<f:selectItems value="#{actSeguiExpe.clasesMant}" var="clase"
							itemLabel="#{clase.descripcion}" itemValue="#{clase.idClase}" />
					</p:selectOneMenu>
					<p:message for="somClase" />

					<h:outputLabel value="Código Cliente :" />
					<p:inputText id="txtCodCliente" label="CodCliente" size="20" maxlength="8"
						value="#{actSeguiExpe.codCliente}" onkeypress="return validarSoloNumeros(event,this);"
						onblur="return validarSoloNumeros();"/>
					<p:message for="txtCodCliente" />

					<h:outputLabel value="Tipo Documento:" />
					<p:selectOneMenu id="somTipoDoc" label="Tipo Documento"
						value="#{actSeguiExpe.idTipoDocumento}" effect="fade"
						style="width:120px;">
						<f:selectItem itemLabel="Seleccione" itemValue="-1" />
						<f:selectItems value="#{actSeguiExpe.tipoDocumentos}" var="tipoDoc"
							itemLabel="#{tipoDoc.descripcion}"
							itemValue="#{tipoDoc.idTipoDocumento}" />
					</p:selectOneMenu>
					<p:message for="somTipoDoc" />

					<h:outputLabel value="Nro Documento :" />
					<p:inputText id="txtNroDoc" label="Nro Documento" size="40" maxlength="11"
						value="#{actSeguiExpe.numeroDocumento}" onkeypress="return validarSoloNumeros(event,this);"
							onblur="return validarSoloNumeros();">
					</p:inputText>
					<p:message for="txtNroDoc" />

					<h:outputLabel value="Nombre/Razón Social :" />
					<p:inputText id="txtRaz" value="#{actSeguiExpe.txtNombres}" maxlength="50" size="50" />
					<p:message for="txtRaz" />

					<h:outputLabel value="Apellido Paterno :" />
					<p:inputText id="txtApePat"
						value="#{actSeguiExpe.txtApellidoPaterno}" maxlength="50" size="50"/>
					<p:message for="txtApePat" />

					<h:outputLabel value="Apellido Materno :" />
					<p:inputText id="txtApeMat"
						value="#{actSeguiExpe.txtApellidoMaterno}" maxlength="50" size="50"/>
					<p:message for="txtApeMat" />

				</h:panelGrid>

				<h:panelGrid columns="7">

					<p:commandButton id="btnBuscar" value="Buscar"  
						update="gridMsj dtPersonas" icon="ui-icon-search"
						actionListener="#{actSeguiExpe.buscarPersonaMantenimiento}" ajax="true" />

					<p:spacer width="10" height="20" />

					<p:commandButton id="btnAgregar" value="Agregar" 
						icon="ui-icon-plus" update=":frmMantenPers:gridMsj :frmMantenPers:gridPers :frmMantenPers:dtPersonas"
						actionListener="#{actSeguiExpe.agregarPersonaMantenimiento}" ajax="true" />
					<p:spacer width="10" height="20" />

					<p:commandButton id="btnLimpiar" value="Limpiar"
						icon="ui-icon-trash" actionListener="#{actSeguiExpe.limpiarPersonaMantenimiento}"
						update="gridMsj gridPers dtPersonas" ajax="true" />

				</h:panelGrid>


				<p:outputPanel id="dtPersonas">
					<p:dataTable value="#{actSeguiExpe.personaDataModelBusq}"
						var="tblPers" rows="5" rowKey="#{tblPers.idPersona}"
						selectionMode="single" paginatorPosition="bottom"
						dblClickSelect="true" emptyMessage="No hay personas"
						paginator="true" selection="#{actSeguiExpe.selectPersona}"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}"
						rowsPerPageTemplate="5,10,15">

						<p:ajax event="rowDblselect"
							listener="#{actSeguiExpe.seleccionarPersona}"
							oncomplete="dlgDetPers.hide()" />

						<p:column>
							<f:facet name="header">
								<h:outputText value="Nombre/Raz&#243;n Social" />
							</f:facet>
							<h:outputText value="#{tblPers.nombres}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Tipo Documento" />
							</f:facet>
							<h:outputText value="#{tblPers.tipoDocumento.descripcion}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Número Doc." />
							</f:facet>
							<h:outputText value="#{tblPers.numeroDocumento}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Clase" />
							</f:facet>
							<h:outputText value="#{tblPers.clase.descripcion}" />
						</p:column>

					</p:dataTable>
				</p:outputPanel>

			</h:form>

	</ui:define>

</ui:composition>

</html>