<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="../WEB-INF/plantilla/layout.xhtml">

	<ui:define name="contenido">
		<h:form id="frmNotif">
			<p:panel header="#{msjs.notif_titulo_principal}" id="pnlNotif">
				<p:accordionPanel id="accPnlNotif">
					<p:tab title="#{msjs.datos_expe_titulo}" closable="true">
						<h:panelGrid columns="11">

							<h:outputLabel for="txtNroExpeOficial"
								value="#{msjs.datos_expe_nro}" />

							<p:inputMask value="#{notificacion.nroExpeOficial}"
								id="txtNroExpeOficial" required="true" label="Nro Expediente"
								mask="999-9999">
							</p:inputMask>

							<p:message id="msgNroExpeOficial" for="txtNroExpeOficial" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_ini_proceso}" />
							<p:calendar value="#{notificacion.iniProceso}" id="calIniPro"
								showOn="button" pattern="dd/MM/yyyy" required="true"
								label="Fecha de Inicio" title="Escoje una fecha">
							</p:calendar>
							<p:message for="calIniPro" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_estado}" />

							<p:selectOneMenu value="#{notificacion.estado}" id="somEstado"
								effect="fade" required="true" label="Estado">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.estados}" />
							</p:selectOneMenu>
							<p:message for="somEstado" />

						</h:panelGrid>

						<h:panelGrid columns="15">

							<h:outputLabel value="#{msjs.datos_expe_proceso}" />
							<p:selectOneMenu id="somProceso" value="#{notificacion.proceso}"
								required="true" label="Proceso">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.procesos}" />
								<p:ajax update="somVia" listener="#{notificacion.cambioProceso}" />
							</p:selectOneMenu>
							<p:message for="somProceso" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_via}" />
							<p:selectOneMenu id="somVia" value="#{notificacion.via}">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.vias}" />
							</p:selectOneMenu>
							<p:message for="somVia" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_instancia}" />
							<p:selectOneMenu value="#{notificacion.instancia}"
								id="somInstancia" effect="fade" required="true"
								label="Instancia">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.instancias}" />
							</p:selectOneMenu>
							<p:message for="somInstancia" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_responsable}" />
							<p:autoComplete id="acResponsable"
								value="#{notificacion.responsable}"
								completeMethod="#{notificacion.completeResponsable}" var="resp"
								itemLabel="#{resp.descripcionResponsable}"
								itemValue="#{resp.codigo}" size="30">

							</p:autoComplete>
							<p:message for="acResponsable" />

						</h:panelGrid>

						<h:panelGrid columns="14">

							<h:outputLabel value="#{msjs.datos_expe_oficina}" />
							<p:autoComplete id="acOficina" value="#{notificacion.oficina}"
								var="ofic" itemLabel="#{ofic.descripcion}"
								itemValue="#{ofic.codigo}"
								completeMethod="#{notificacion.completeOficina}" size="45">

							</p:autoComplete>
							<p:message for="acOficina" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_tipo}" />
							<p:selectOneMenu id="somTipo" value="#{notificacion.tipo}">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.tipos}" />
							</p:selectOneMenu>
							<p:message for="somTipo" />

							<h:outputLabel value="#{msjs.datos_expe_organo}" />
							<p:autoComplete id="acOrgano" value="#{notificacion.organo}"
								completeMethod="#{notificacion.completeOrgano}" size="45">
							</p:autoComplete>
							<p:message for="acOrgano" />


							<p:commandButton id="panelOrganoBtn" icon="ui-icon-extlink"
								type="button" onclick="dlgOrg.show();" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_secretario}" />
							<p:inputText value="#{notificacion.secretario}"
								id="txtSecretario" />

						</h:panelGrid>

						<h:panelGrid columns="6">

							<h:outputLabel value="#{msjs.datos_expe_calificacion}" />
							<p:selectOneMenu id="somCalificacion"
								value="#{notificacion.calificacion}" effect="fade"
								required="true" label="Calificacion">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.calificaciones}" />
							</p:selectOneMenu>
							<p:message for="somCalificacion" />

							<p:spacer width="20" height="20" />

							<h:outputLabel value="#{msjs.datos_expe_recurrencia}" />
							<p:inputText value="#{notificacion.recurrencia}" size="25" />

						</h:panelGrid>



					</p:tab>
					<p:tab id="tabResumen" title="#{msjs.datos_expe_sub_titulo_6}">
						<h:panelGrid columns="5">
							<h:outputLabel value="#{msjs.datos_expe_fec_resumen}" />
							<p:calendar value="#{notificacion.fechaResumen}" showOn="button"
								pattern="dd/MM/yyyy">
							</p:calendar>

							<h:outputLabel value="#{msjs.datos_expe_resumen}" />
							<p:editor id="editor" value="#{notificacion.resumen}" width="350"
								height="170" />

							<p:commandButton update="txtAreaTodoResumen" ajax="true"
								actionListener="#{notificacion.agregarTodoResumen}"
								icon="ui-icon-plus" />

						</h:panelGrid>

						<p:inputTextarea id="txtAreaTodoResumen"
							value="#{notificacion.todoResumen}" rows="6" cols="60"
							readonly="true" />
					</p:tab>
					<p:tab id="tabActProc" title="#{msjs.notif_activ_proc_titulo}">

						<h:outputLabel value="#{msjs.notif_activ_proc_label}" />

						<h:panelGrid columns="4">
							<p:spacer width="48" height="20" />
							<p:inputText id="txtDescrNoti"
								value="#{notificacion.descripNotif}" size="75" />
							<p:message for="txtDescrNoti" />

							<p:commandButton id="btnActProc" icon="ui-icon-extlink"
								type="button" onclick="dlgActProc.show();" />
						</h:panelGrid>

					</p:tab>
					<p:tab id="tabAnexo" title="#{msjs.notif_anex_titulo}">

						<h:panelGrid columns="3">
							<h:outputLabel value="#{msjs.notif_anex_doc}" />
							<p:inputText id="txtDocumento"
								value="#{notificacion.documentoAnexo}" size="75" />
							<p:commandButton id="btnAnexo" icon="ui-icon-extlink"
								type="button" onclick="dlgAnex.show();" />
						</h:panelGrid>


					</p:tab>
					<p:tab id="tabRiesgo" title="#{msjs.datos_expe_sub_titulo_7}">

						<h:panelGrid columns="2">
							<h:outputLabel value="#{msjs.datos_expe_riesgo}" />
							<p:selectOneMenu id="somRiesgo" value="#{notificacion.riesgo}"
								style="width:120px;">
								<f:selectItem itemLabel="Seleccione" itemValue="" />
								<f:selectItems value="#{notificacion.riesgos}" var="rsg"
									itemLabel="#{rsg}" itemValue="#{rsg}" />
							</p:selectOneMenu>

						</h:panelGrid>

					</p:tab>
				</p:accordionPanel>
				<h:panelGrid columns="3">
					<p:commandButton value="Finalizar Instancia" type="button" />
					<p:commandButton value="Guardar" action="#{notificacion.guardar}"
						ajax="false"></p:commandButton>
					<p:commandButton value="Limpiar" type="reset"></p:commandButton>
				</h:panelGrid>

			</p:panel>

		</h:form>

		<!-- Mantenimiento de Organos -->
		<p:dialog widgetVar="dlgOrg" modal="true" id="dlgOrgPanel"
			header="Mantenimiento de Organo">

			<h:form id="frmMantOrgano">

				<h:messages globalOnly="true" />
				<h:panelGrid columns="3">
					<h:outputLabel value="Entidad :" />
					<p:selectOneMenu value="#{notificacion.organoMant.entidad}"
						id="somEntidad" effect="fade" style="width:120px;" required="true"
						label="Entidad">
						<f:selectItem itemLabel="Seleccione" itemValue="" />
						<f:selectItem itemLabel="Ministerio" itemValue="001" />
						<f:selectItem itemLabel="Poder Judicial" itemValue="002" />
						<f:selectItem itemLabel="Tribunal Constitucional" itemValue="003" />
					</p:selectOneMenu>
					<p:message for="somEntidad" />

					<h:outputLabel value="Organo :" />
					<p:inputText id="txtOrgano"
						value="#{notificacion.organoMant.nombre}" required="true"
						label="Organo" />
					<p:message for="txtOrgano" />

					<h:outputLabel value="Distrito :" />
					<p:autoComplete id="acDistrito"
						value="#{notificacion.organoMant.descripcion2}"
						completeMethod="#{notificacion.completeDistrito}" size="35"
						required="true" label="Distrito">

					</p:autoComplete>
					<p:message for="acDistrito" />

				</h:panelGrid>

				<h:panelGrid columns="3">
					<p:commandButton icon="ui-icon-search" value="Buscar"
						update="dtlistOrganos"
						actionListener="#{notificacion.buscarOrganos}" />

					<p:spacer width="20" height="20" />

					<p:commandButton icon="ui-icon-plus" value="Agregar"
						action="#{notificacion.agregarOrgano}" ajax="false" />


				</h:panelGrid>

				<p:outputPanel id="dtlistOrganos">

					<p:dataTable value="#{notificacion.organoDataModel}" var="tbl_orgn"
						id="organoTable" paginator="true" rows="3"
						emptyMessage="No hay registros" paginatorPosition="bottom"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {NextPageLink} {LastPageLink}"
						rowKey="#{tbl_orgn.codigo}" selectionMode="single"
						selection="#{notificacion.organoSelec}"
						rowsPerPageTemplate="5,10,15">

						<p:column>
							<f:facet name="header">
								<h:outputText value="Organo Jurisdiccional" />
							</f:facet>
							<h:outputText value="#{tbl_orgn.nombre}" />
						</p:column>

						<p:column>
							<f:facet name="header">
								<h:outputText value="Distrito" />
							</f:facet>
							<h:outputText value="#{tbl_orgn.descripcion2}" />
						</p:column>


					</p:dataTable>

				</p:outputPanel>

			</h:form>


		</p:dialog>


		
		<!-- Actividad Procesal -->
		<p:dialog widgetVar="dlgActProc" modal="true" id="dlgActProcPanel"
			header="Actividad Procesal">

			<h:form id="frmActProc">

				<h:panelGrid columns="3">
					<h:outputLabel value="#{msjs.datos_expe_proceso}" />
					<p:selectOneMenu id="somProceso" value="#{notificacion.proceso}"
						label="Proceso" style="width:120px;">
						<f:selectItem itemLabel="Seleccione" itemValue="" />
						<f:selectItems value="#{notificacion.procesos}" />
						<p:ajax update="somVia" listener="#{notificacion.cambioProceso}" />
					</p:selectOneMenu>

					<p:message for="somProceso" />

					<h:outputLabel value="#{msjs.datos_expe_via}" />
					<p:selectOneMenu id="somVia" value="#{notificacion.via}"
						style="width:120px;">
						<f:selectItem itemLabel="Seleccione" itemValue="" />
						<f:selectItems value="#{notificacion.vias}" />
					</p:selectOneMenu>
					<p:message for="somVia" />

					<h:outputLabel value="Actividad" />
					<p:inputText id="txtAct" value="#{notificacion.actividad}">
					</p:inputText>
					<p:message for="txtAct" />

					<h:outputLabel value="Plazo ley" />
					<p:inputText id="txtPlazo" value="#{notificacion.plazo}">
					</p:inputText>
					<p:message for="txtPlazo" />


				</h:panelGrid>
				<h:panelGrid columns="3">
					<p:commandButton value="Grabar" type="button" />
					<p:commandButton value="Limpiar" type="reset" />
					<p:commandButton value="Cancelar" type="button" />
				</h:panelGrid>

			</h:form>

		</p:dialog>

		<p:dialog widgetVar="dlgAnex" modal="true" id="dlgAnexPanel"
			header="Agregar Anexo">


			<h:form enctype="multipart/form-data">

				<h:panelGrid columns="3">

					<h:outputText value="Examinar:"></h:outputText>
					<p:fileUpload id="fileDoc" value="#{notificacion.file}"
						mode="simple" required="true" />
					<p:message for="fileDoc"></p:message>

					<h:outputText value="Titulo:"></h:outputText>
					<p:inputText id="docTit" value="#{notificacion.documento.titulo}"
						required="true"></p:inputText>
					<p:message for="docTit" />

					<h:outputText value="Comentario:"></h:outputText>
					<p:inputText id="docCom"
						value="#{notificacion.documento.comentario}" required="true"></p:inputText>
					<p:message for="docCom" />

					<h:outputText value="Fecha:"></h:outputText>
					<p:calendar value="#{notificacion.documento.fecha}" showOn="button"
						pattern="dd/MM/yyyy" required="true" id="calFec" />
					<p:message for="calFec" />


					<p:commandButton type="button" value="Agregar" icon="ui-icon-check" />

					<p:commandButton type="reset" value="Limpiar" />



				</h:panelGrid>


			</h:form>

		</p:dialog>

	</ui:define>
</ui:composition>

</html>